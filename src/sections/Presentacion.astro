---
import '../styles/css/sections/Presentacion.css';

interface ImageData {
  src: string;
  caption: string;
}

const images: ImageData[] = [
  {
    src: "/GaliaFoto.png",
    caption: "Mi primer añito",
  },
  {
    src: "/galia/galiahamaca.webp",
    caption: "Momentos especiales",
  },
  {
    src: "/galia/galiamaurogime.webp",
    caption: "Sonrisas de Galia",
  },
  {
    src: "/galia/galiamaurogimeauto.webp",
    caption: "Celebrando juntos",
  }
];
---

<section class="presentation-section">
  <div class="animated-background"></div>
  <div class="presentation-content">
    <div class="presentation-header">
      <h2 class="title animate-fade-in">¡Celebra conmigo!</h2>
      <h3 class="subtitle animate-slide-up">1 añito</h3>
      <p class="description animate-fade-in">
        Galia está cumpliendo su primer añito y quiere compartir este día tan especial contigo
      </p>
    </div>

    <div class="carousel-container">
      <div class="carousel">
        {
          images.map((image, index) => (
            <div 
              class={`carousel-item delay-${index}`} 
              data-index={index}
            >
              <div class="image-wrapper">
                <img
                  src={image.src}
                  alt={image.caption}
                  loading="lazy"
                  class="carousel-image"
                />
              </div>
              <p class="image-caption">{image.caption}</p>
            </div>
          ))
        }
      </div>
      <div class="carousel-dots">
        {images.map((_, index) => (
          <button class="carousel-dot" data-index={index}></button>
        ))}
      </div>
    </div>

    <div class="cta-section animate-fade-in">
      <a href="#" class="cta-button" onclick="showMainContent()">
        Entrar a la invitación
        <span class="button-sparkle">✨</span>
      </a>
    </div>
  </div>
</section>

<style>
  .delay-0 { animation-delay: 0s; }
  .delay-1 { animation-delay: 0.2s; }
  .delay-2 { animation-delay: 0.4s; }
  .delay-3 { animation-delay: 0.6s; }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const carousel = document.querySelector('.carousel');
    const items = document.querySelectorAll('.carousel-item');
    const dots = document.querySelectorAll('.carousel-dot');
    let currentIndex = 0;

    function updateCarousel() {
      items.forEach((item, index) => {
        (item as HTMLElement).style.opacity = index === currentIndex ? '1' : '0';
      });
      dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentIndex);
      });
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % items.length;
      updateCarousel();
    }

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentIndex = index;
        updateCarousel();
      });
    });

    updateCarousel();
    setInterval(nextSlide, 3000);
  });
</script>